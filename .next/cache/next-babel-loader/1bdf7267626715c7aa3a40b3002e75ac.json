{"ast":null,"code":"export var addItem = function addItem(IDproducto) {\n  var products = [];\n  var newItem = true;\n\n  if (localStorage.getItem('st_cart')) {\n    products = JSON.parse(localStorage.getItem('st_cart'));\n    products.map(function (itemID) {\n      if (itemID == IDproducto) {\n        newItem = false;\n      }\n    });\n  }\n\n  if (newItem) {\n    products.push(IDproducto);\n  }\n\n  localStorage.setItem('st_cart', JSON.stringify(products));\n  return products;\n}; // export const removeItem = async (productId) => {\n//     try {\n//         var products = [];\n//         let datab = {};\n//         datab.total = 0;\n//         datab.items_cart = [];\n//         let itemsID = [];\n//         products = JSON.parse(localStorage.getItem('st_cart'));\n//         products.splice(products.findIndex(e => e === productId), 1);\n//         localStorage.removeItem('st_cart');\n//         localStorage.setItem('st_cart', JSON.stringify(products));\n//         datab.items = JSON.parse(localStorage.getItem('st_cart')); // tomamos de local storage el carrito\n//         if (datab.items.length <= 0) {\n//             datab.total = 0;\n//             return datab\n//         }\n//         datab.items.map(singleItem => {\n//             itemsID.push(singleItem); // tomamos los id de los productos\n//         })\n//         let findeditems = [];\n//         const {\n//             data\n//         } = await findTedAndBob(itemsID);\n//         Object.entries(data).map(ite => {\n//             findeditems.push(ite[1]);\n//         })\n//         findeditems.map(singleItem => {\n//             datab.items.map(othersingle => {\n//                 if (singleItem._id == othersingle) {\n//                     datab.items_cart.push({\n//                         id: singleItem._id,\n//                         // name: singleItem.name,\n//                         price: singleItem.price,\n//                         title: singleItem.title,\n//                         portada: singleItem.portada,\n//                         // image: singleItem.images[0].url,\n//                         subtotal: parseInt(singleItem.price)\n//                     })\n//                 }\n//             })\n//         })\n//         datab.items_cart.map(singleItem => { // calculamos el total \n//             datab.total += singleItem.subtotal;\n//         })\n//         return datab;\n//     } catch (error) {\n//         return {\n//             data: error\n//         }\n//     }\n// }\n\nexport var removeItem = function removeItem(IDproducto) {\n  var products = [];\n  products = JSON.parse(localStorage.getItem('st_cart'));\n\n  if (products.length > 0) {\n    var updated = products.filter(function (itemID) {\n      return itemID !== IDproducto;\n    });\n    localStorage.removeItem('st_cart');\n    localStorage.setItem('st_cart', JSON.stringify(updated));\n    return updated;\n  }\n\n  return products;\n};","map":{"version":3,"sources":["C:/Users/crist/Desktop/turismo_webapp/lib/cartlib.js"],"names":["addItem","IDproducto","products","newItem","localStorage","getItem","JSON","parse","map","itemID","push","setItem","stringify","removeItem","length","updated","filter"],"mappings":"AAEA,OAAO,IAAMA,OAAO,GAAG,SAAVA,OAAU,CAACC,UAAD,EAAgB;AACnC,MAAIC,QAAQ,GAAG,EAAf;AACA,MAAIC,OAAO,GAAG,IAAd;;AACA,MAAIC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAJ,EAAqC;AACjCH,IAAAA,QAAQ,GAAGI,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAAX;AACAH,IAAAA,QAAQ,CAACM,GAAT,CAAa,UAAAC,MAAM,EAAI;AACnB,UAAIA,MAAM,IAAIR,UAAd,EAA0B;AACtBE,QAAAA,OAAO,GAAG,KAAV;AACH;AACJ,KAJD;AAKH;;AACD,MAAIA,OAAJ,EAAa;AACTD,IAAAA,QAAQ,CAACQ,IAAT,CAAcT,UAAd;AACH;;AACDG,EAAAA,YAAY,CAACO,OAAb,CAAqB,SAArB,EAAgCL,IAAI,CAACM,SAAL,CAAeV,QAAf,CAAhC;AAEA,SAAOA,QAAP;AAEH,CAlBM,C,CAoBP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA,OAAO,IAAMW,UAAU,GAAG,SAAbA,UAAa,CAACZ,UAAD,EAAgB;AACtC,MAAIC,QAAQ,GAAG,EAAf;AACAA,EAAAA,QAAQ,GAAGI,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAAX;;AACA,MAAGH,QAAQ,CAACY,MAAT,GAAkB,CAArB,EAAuB;AACnB,QAAMC,OAAO,GAAGb,QAAQ,CAACc,MAAT,CAAgB,UAAAP,MAAM;AAAA,aAAIA,MAAM,KAAKR,UAAf;AAAA,KAAtB,CAAhB;AACAG,IAAAA,YAAY,CAACS,UAAb,CAAwB,SAAxB;AACAT,IAAAA,YAAY,CAACO,OAAb,CAAqB,SAArB,EAAgCL,IAAI,CAACM,SAAL,CAAeG,OAAf,CAAhC;AACA,WAAOA,OAAP;AACH;;AACD,SAAOb,QAAP;AACH,CAVM","sourcesContent":["\r\n\r\nexport const addItem = (IDproducto) => {\r\n    let products = [];\r\n    let newItem = true;\r\n    if (localStorage.getItem('st_cart')) {\r\n        products = JSON.parse(localStorage.getItem('st_cart'));\r\n        products.map(itemID => {\r\n            if (itemID == IDproducto) {\r\n                newItem = false;\r\n            }\r\n        })\r\n    }\r\n    if (newItem) {\r\n        products.push(IDproducto);\r\n    }\r\n    localStorage.setItem('st_cart', JSON.stringify(products));\r\n\r\n    return products;\r\n\r\n}\r\n\r\n// export const removeItem = async (productId) => {\r\n//     try {\r\n//         var products = [];\r\n//         let datab = {};\r\n//         datab.total = 0;\r\n//         datab.items_cart = [];\r\n//         let itemsID = [];\r\n//         products = JSON.parse(localStorage.getItem('st_cart'));\r\n//         products.splice(products.findIndex(e => e === productId), 1);\r\n//         localStorage.removeItem('st_cart');\r\n//         localStorage.setItem('st_cart', JSON.stringify(products));\r\n//         datab.items = JSON.parse(localStorage.getItem('st_cart')); // tomamos de local storage el carrito\r\n//         if (datab.items.length <= 0) {\r\n//             datab.total = 0;\r\n//             return datab\r\n//         }\r\n//         datab.items.map(singleItem => {\r\n//             itemsID.push(singleItem); // tomamos los id de los productos\r\n//         })\r\n\r\n//         let findeditems = [];\r\n//         const {\r\n//             data\r\n//         } = await findTedAndBob(itemsID);\r\n//         Object.entries(data).map(ite => {\r\n//             findeditems.push(ite[1]);\r\n//         })\r\n\r\n//         findeditems.map(singleItem => {\r\n//             datab.items.map(othersingle => {\r\n//                 if (singleItem._id == othersingle) {\r\n//                     datab.items_cart.push({\r\n//                         id: singleItem._id,\r\n//                         // name: singleItem.name,\r\n//                         price: singleItem.price,\r\n//                         title: singleItem.title,\r\n//                         portada: singleItem.portada,\r\n//                         // image: singleItem.images[0].url,\r\n//                         subtotal: parseInt(singleItem.price)\r\n//                     })\r\n//                 }\r\n//             })\r\n//         })\r\n//         datab.items_cart.map(singleItem => { // calculamos el total \r\n//             datab.total += singleItem.subtotal;\r\n//         })\r\n//         return datab;\r\n//     } catch (error) {\r\n//         return {\r\n//             data: error\r\n//         }\r\n//     }\r\n\r\n// }\r\n\r\nexport const removeItem = (IDproducto) => {\r\n    let products = [];\r\n    products = JSON.parse(localStorage.getItem('st_cart'));\r\n    if(products.length > 0){\r\n        const updated = products.filter(itemID => itemID !== IDproducto);\r\n        localStorage.removeItem('st_cart');\r\n        localStorage.setItem('st_cart', JSON.stringify(updated));\r\n        return updated;\r\n    }\r\n    return products;\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}